# Linking Rust and Python with Maturin

**Step 1:** Create a Python Program:

**Step 2:** Create a Rust Library:

1. Install Maturing: `pip install maturin` 
2. Create a new directory where the rust library will live and move into it. `mkdir fibonacci_lib`
3. Run `maturin init` and select `pyo3` as the binding type.

**Step 3:** Implement the Fibonacci function in Rust:

Modify your `lib.rs` file to include the Fibonacci function: 
```rust
// lib.rs
use pyo3::prelude::*;

fn fibbonaci_number(n:u32) -> u32 {
    if n<=1 {
        return n;
    }
    fibbonaci_number(n-1) + fibbonaci_number(n-2)
}

/// Retrieves the Fibonacci number of a given n.
#[pyfunction]
fn calculate_fibonacci(n:u32) -> PyResult<u32> {
    Ok(fibbonaci_number(n))
}

/// A Python module implemented in Rust.
#[pymodule]
fn fibonacci_lib(m: &Bound<'_, PyModule>) -> PyResult<()> {
    m.add_function(wrap_pyfunction!(calculate_fibonacci, m)?)?;
    Ok(())
}
    
```
** Step 4: ** Build the library. In the rust directory, run `maturin develop` to build the library and create a symbolic link to the python package.

This command generates and install the rust library in the virtual environment, you could enhance perfomance by running `maturin develop --release` to build the library in release mode.
  
**Step 6:** Write Python code to use the Rust Fibonacci function:
- Now, create a Python script where you'll call the Rust function to calculate Fibonacci numbers:

```python
# Python code to use the Rust Fibonacci function.

# Load the dynamically linked library (dylib) generated by Maturin
from fibonacci_lib import calculate_fibonacci

# Usage example
if __name__ == "__main__":
    import matplotlib.pyplot as plt
    
    n_max = 50
    fib_numbers = []
    
    for n in range(0, n_max + 1):
        fib_number = calculate_fibonacci(n)
        fib_numbers.append(fib_number)
        print(f"Fibonacci({n}) = {fib_number}")

    # Plotting the Fibonacci numbers using Python(you can do this part in Python)
    plt.plot(range(0, n_max + 1), fib_numbers)
    plt.xlabel('n')
    plt.ylabel('Fibonacci(n)')
    plt.title('Fibonacci Sequence')
    plt.show()
 
```

**Step 7:** Run the Python script:
Now, you can run the Python script to calculate Fibonacci numbers and plot the result using Matplotlib.

```bash
python python_fibonacci.py
```

This is a simple example of combining Python and Rust code using Maturin. You can organize the code into separate modules or packages for larger projects.

Remember that while using Rust can enhance the performance of certain parts of your application, especially number-crunching-intensive tasks like calculating Fibonacci numbers, it may introduce additional complexities in managing cross-language communication. For small projects, the added overhead might not be worth it. For larger projects or significant performance bottlenecks, this approach can be valid.
[see](https://www.youtube.com/watch?v=jlWhnrk8go0&ab_channel=IsaacHarris-Holt)